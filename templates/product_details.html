{% extends "base.html" %}

{% block content %}
<div class="bg-white dark:bg-gray-800 py-8 min-w-4/5">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex flex-col md:flex-row -mx-4">
            <div class="md:flex-1 px-4">
                <div class=" rounded-lg bg-gray-300 dark:bg-gray-700 mb-4">
                    <div class="max-w-2xl mx-auto">
                        
                        <!-- Carousel -->
                        <div id="default-carousel" class="relative rounded-lg overflow-hidden shadow-lg" data-carousel="static">
                            <div class="relative min-w-[400px] h-80 md:h-96" data-carousel-inner>
                                
                                <!-- Only 1 Photo -->
                                {% if product.image2 != True %}
                                <img src="{{product.image1.url}}"
                                class="object-cover w-full h-full">
                                {% endif %}
                                
                                <!-- 2+ Photos-->
                                {% if product.image2 %}
                                    <!-- Item 1 -->
                                    <div class="hidden duration-700 ease-in-out" data-carousel-item>
                                        <img src="{{product.image1.url}}"
                                            class="object-cover w-full h-full" alt="Slide 1">
                                    </div>
                                    <!-- Item 2 -->
                                    <div class="hidden duration-700 ease-in-out" data-carousel-item>
                                        <img src="{{product.image2.url}}"
                                            class="object-cover w-full h-full" alt="Slide 2">
                                    </div>
                                    {% endif %}
                                    <!-- Item 3 -->
                                    {% if product.image3 %}
                                    <div class="hidden duration-700 ease-in-out" data-carousel-item>
                                        <img src="{{product.image3.url}}"
                                            class="object-cover w-full h-full" alt="Slide 3">
                                    </div>
                                    {% endif %}
                                    <!-- Item 4 -->
                                    {% if product.image4 %}
                                    <div class="hidden duration-700 ease-in-out" data-carousel-item>
                                        <img src="{{product.image4.url}}"
                                            class="object-cover w-full h-full" alt="Slide 4">
                                    </div>
                                    {% endif %}
                                    <!-- Item 5 -->
                                    {% if product.image5 %}
                                    <div class="hidden duration-700 ease-in-out" data-carousel-item>
                                        <img src="{{product.image5.url}}"
                                            class="object-cover w-full h-full" alt="Slide 5">
                                    </div>
                                    {% endif %}
                                    <!-- Item 6 -->
                                    {% if product.image6 %}
                                    <div class="hidden duration-700 ease-in-out" data-carousel-item>
                                        <img src="{{product.image6.url}}"
                                            class="object-cover w-full h-full" alt="Slide 6">
                                    </div>
                                    {% endif %}
                                </div>
                            <div class="flex absolute bottom-5 left-1/2 z-30 -translate-x-1/2 space-x-2" data-carousel-indicators>
                                {% if product.image1 %}
                                    <button type="button" class="w-3 h-3 rounded-full bg-gray-300 hover:bg-gray-400 focus:outline-none focus:bg-gray-400 transition"></button>
                                {% endif %}
                                {% if product.image2 %}
                                    <button type="button" class="w-3 h-3 rounded-full bg-gray-300 hover:bg-gray-400 focus:outline-none focus:bg-gray-400 transition"></button>
                                {% endif %}
                                {% if product.image3 %}
                                    <button type="button" class="w-3 h-3 rounded-full bg-gray-300 hover:bg-gray-400 focus:outline-none focus:bg-gray-400 transition"></button>
                                {% endif %}
                                {% if product.image4 %}
                                    <button type="button" class="w-3 h-3 rounded-full bg-gray-300 hover:bg-gray-400 focus:outline-none focus:bg-gray-400 transition"></button>
                                {% endif %}
                                {% if product.image5 %}
                                    <button type="button" class="w-3 h-3 rounded-full bg-gray-300 hover:bg-gray-400 focus:outline-none focus:bg-gray-400 transition"></button>
                                {% endif %}
                                {% if product.image6 %}
                                    <button type="button" class="w-3 h-3 rounded-full bg-gray-300 hover:bg-gray-400 focus:outline-none focus:bg-gray-400 transition"></button>
                                {% endif %}
                            </div>

                            <!-- Slider controls -->
                            {% if product.image2 %}
                            <button type="button"
                                class="flex absolute top-1/2 left-3 z-40 items-center justify-center w-10 h-10 bg-gray-100 rounded-full hover:bg-gray-300 focus:outline-none transition"
                                data-carousel-prev>
                                <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                                </svg>
                            </button>
                            <button type="button"
                                class="flex absolute top-1/2 right-3 z-40 items-center justify-center w-10 h-10 bg-gray-100 rounded-full hover:bg-gray-300 focus:outline-none transition"
                                data-carousel-next>
                                <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                </svg>
                            </button>
                            {% endif %}
                        </div>
                        <script src="https://unpkg.com/flowbite@1.4.0/dist/flowbite.js"></script>
                    </div>
                </div>
                <!-- Mobile -->
                <div class="md:invisible flex -mx-2 mb-4">
                    {% if in_cart %}
                    <div class="w-1/2 px-2">
                        <a href="{% url "carts:cart" %}">
                            <button class="w-full bg-gray-900 dark:bg-gray-600 text-white py-2 px-4 rounded-full font-bold hover:bg-gray-800 dark:hover:bg-gray-700">View Cart</button>
                        </a>
                    </div>
                    <div class="w-1/2 px-2">
                        <a href="{% url "carts:cart" %}">
                            <button class="w-full bg-green-600 dark:bg-gray-700 text-white dark:text-white py-2 px-4 rounded-full font-bold">In Cart</button>
                        </a>
                    </div>
                    {% else %}
                    <div class="w-1/2 px-2">
                        <a href="{% url "carts:add_cart" product.id %}">
                            <button class="w-full bg-gray-900 dark:bg-gray-600 text-white py-2 px-4 rounded-full font-bold hover:bg-gray-800 dark:hover:bg-gray-700">Add to Cart</button>
                        </a>
                    </div>
                    {% endif %}
                </div>
            </div>
            <div class="md:flex-1 px-4">
                <h2 class="text-2xl font-bold text-gray-800 dark:text-white mb-2">{{product.product_name}}</h2>
                <p class="text-gray-600 mb-4">{{product.description}}</p>
                <div class="flex mb-4">
                    <div class="mr-4">
                        <span class="font-bold text-gray-700 dark:text-gray-300">Price:</span>
                        <span class="text-gray-600 dark:text-gray-300">${{product.price}}</span>
                    </div>
                    <div>
                        {% if product.stock > 1 %}
                        <span class="font-bold text-gray-700 dark:text-gray-300">Stock Available:</span>
                        <span class="text-gray-600 dark:text-gray-300">{{product.stock}}</span>
                        {% endif %}
                    </div>
                </div>

                <!--Option for Colors-->
                {% comment %} <div class="mb-4">
                    <span class="font-bold text-gray-700 dark:text-gray-300">Select Color:</span>
                    <div class="flex items-center mt-2">
                        <button class="w-6 h-6 rounded-full bg-gray-800 dark:bg-gray-200 mr-2"></button>
                        <button class="w-6 h-6 rounded-full bg-red-500 dark:bg-red-700 mr-2"></button>
                        <button class="w-6 h-6 rounded-full bg-blue-500 dark:bg-blue-700 mr-2"></button>
                        <button class="w-6 h-6 rounded-full bg-yellow-500 dark:bg-yellow-700 mr-2"></button>
                    </div>
                </div> {% endcomment %}

                <!--Option for Size-->
                {% comment %} <div class="mb-4">
                    <span class="font-bold text-gray-700 dark:text-gray-300">Select Size:</span>
                    <div class="flex items-center mt-2">
                        <button class="bg-gray-300 dark:bg-gray-700 text-gray-700 dark:text-white py-2 px-4 rounded-full font-bold mr-2 hover:bg-gray-400 dark:hover:bg-gray-600">S</button>
                        <button class="bg-gray-300 dark:bg-gray-700 text-gray-700 dark:text-white py-2 px-4 rounded-full font-bold mr-2 hover:bg-gray-400 dark:hover:bg-gray-600">M</button>
                        <button class="bg-gray-300 dark:bg-gray-700 text-gray-700 dark:text-white py-2 px-4 rounded-full font-bold mr-2 hover:bg-gray-400 dark:hover:bg-gray-600">L</button>
                        <button class="bg-gray-300 dark:bg-gray-700 text-gray-700 dark:text-white py-2 px-4 rounded-full font-bold mr-2 hover:bg-gray-400 dark:hover:bg-gray-600">XL</button>
                        <button class="bg-gray-300 dark:bg-gray-700 text-gray-700 dark:text-white py-2 px-4 rounded-full font-bold mr-2 hover:bg-gray-400 dark:hover:bg-gray-600">XXL</button>
                    </div>
                </div> {% endcomment %}
                <div>
                    <span class="font-bold text-gray-700 dark:text-gray-300">Product Description:</span>
                    <p class="text-gray-600 dark:text-gray-300 text-sm mt-2">
                       {{product.description_full}}
                    </p>
                </div>
                <!--Desktop/Larger Screen-->
                <div class="invisible md:visible flex -mx-2 mb-4 mt-6 max-w-110 lg:min-w-80">
                    {% if in_cart %}
                    <div class="w-1/2 px-2">
                        <a href="{% url "carts:cart" %}">
                            <button class="w-full bg-gray-900 dark:bg-gray-600 text-white py-2 px-4 rounded-full font-bold hover:bg-gray-800 dark:hover:bg-gray-700">View Cart</button>
                        </a>
                    </div>
                    <div class="w-1/2 px-2">
                        <a href="{% url "carts:cart" %}">
                            <button class="w-full bg-green-600 dark:bg-gray-700 text-white dark:text-white py-2 px-4 rounded-full font-bold">In Cart</button>
                        </a>
                    </div>
                    {% else %}
                    <div class="w-1/2 px-2">
                        <a href="{% url "carts:add_cart" product.id %}">
                            <button class="w-full bg-gray-900 dark:bg-gray-600 text-white py-2 px-4 rounded-full font-bold hover:bg-gray-800 dark:hover:bg-gray-700">Add to Cart</button>
                        </a>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}